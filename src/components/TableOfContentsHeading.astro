---
import type { Heading } from "./TableOfContents.astro";
import Link from "./Link.astro";

// https://kld.dev/building-table-of-contents/

const { heading } = Astro.props;

// Determine the heading style based on depth
const isH1 = heading.depth === 1;
const headingClass = isH1 
  ? "font-medium" 
  : "text-black/70 dark:text-white/70";

// Add indentation for H2s and deeper
const indentClass = isH1 ? "" : "2";
---

<li class={`list-none ${isH1 ? 'mt-2' : ''} text-sm ${indentClass}`}>
  <div class={headingClass}>
    <Link href={"#" + heading.slug} underline>
      {heading.text}
    </Link>
  </div>
  {
    heading.subheadings && heading.subheadings.length > 0 && (
      <ul class="ml-4 mt-1 space-y-1 border-l border-black/10 pl-2 dark:border-white/10">
        {heading.subheadings.map((subheading: Heading) => (
          <Astro.self heading={subheading} />
        ))}
      </ul>
    )
  }
</li>
